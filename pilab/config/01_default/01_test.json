{
    "cfg":
    {
        "modes":
        {
            "test":
            {
                "title":"BitScope Micro Test",
                "machine":"machine_test",
                "current_view":"pre_test",
                "mode_widgets":
                {
                    "next":
                    {
                        "type":"Button",
                        "text":"NEXT",
                        "font_size":50,
                        "size":[180,455],
                        "pos":[1100,0],
                        "layer":10,
                        "key_bind":"a",
                        "colours":
                        {
                            "true":"green",
                            "false":"red"
                        },
                        "strings":
                        {
                            "true":"PASS",
                            "false":"FAIL"
                        },
                        "default_colour":"true"
                    },
                    "bs05":
                    {
                        "type":"Image_Box",
                        "pos":[0,478],
                        "base_path":"./image/test/",
                        "mode":"multi",
                        "layer":0,
                        "images":
                        {
                            "connect":"bs05.png"
                        },
                        "init_image":"connect",
                        "scale":1,
                        "refs":
                        {
                            "data":{"test":"status"}
                        }
                    },
                    "op_counter":
                    {
                        "type":"Panel",
                        "size":[25,23],
                        "pos":[1255,697],
                        "refs":
                        {
                            "data":{"test":"op_count"}
                        }
                    }
                },
                "views":
                {
                    "pre_test":
                    {
                        "title":"USB",
                        "include_widgets":["bs05", "next","op_counter"],
                        "layout":
                        {
                            "next":
                            {
                                "on_click":
                                [
                                    "switch_view('comp')",
                                    "switch_operation('comp')"
                                ],
                                "refs":
                                {
                                    "enable":{"device":"connected_not_tested"}
                                }
                            },
                            "to_lobby":
                            {
                                "type":"Button",
                                "size":[50,50],
                                "text":"Quit",
                                "on_click":["switch_mode('lobby')"],
                                "layer":0,
                                "refs":
                                {
                                    "hide":{"device":"connected"}
                                }
                            },
                            "test_text":
                            {
                                "type":"Text_Box",
                                "size":[600,200],
                                "font_size":50,
                                "pos":[252,200],
                                "colour":"default_dark",
                                "text_colours":
                                {
                                    "failed":"red",
                                    "passed":"green"
                                },
                                "blocks":
                                {
                                    "connect":"\nConnect new PCBA.",
                                    "proceed":"PCBA READY\nConnect test plug.\nStart Q/A procedure.",
                                    "failed":"TEST FAILED\n\nDisconnect PCBA.",
                                    "passed":"TEST PASSED\n\nDisconnect PCBA."
                                },
                                "refs":
                                {
                                    "data":{"test":"status"}
                                }
                            },
                            "bs05":
                            {
                                "images":
                                {
                                    "proceed":"bs05-pre.png"
                                }
                            },
                            "connection_res":
                            {
                                "type":"Panel",
                                "size":[150,50],
                                "text":"USB",
                                "pos":[0,0],
                                "layer":1,
                                "colours":
                                {
                                    "true":"green",
                                    "false":"red",
                                    "nt":"default_darker"
                                },
                                "refs":
                                {
                                    "colour":{"results":"connection"},
                                    "unhide":{"device":"tested"}
                                }
                            },
                            "comp_res":
                            {
                                "type":"Panel",
                                "size":[150,50],
                                "text":"Channels",
                                "pos":[0,50],
                                "layer":1,
                                "colours":
                                {
                                    "true":"green",
                                    "false":"red",
                                    "nt":"default_darker"
                                },
                                "refs":
                                {
                                    "colour":{"results":"comp"},
                                    "unhide":{"device":"tested"}
                                }
                            },
                            "adc_res":
                            {
                                "type":"Panel",
                                "size":[150,50],
                                "text":"Analog",
                                "pos":[0,100],
                                "layer":1,
                                "colours":
                                {
                                    "true":"green",
                                    "false":"red",
                                    "nt":"default_darker"
                                },
                                "refs":
                                {
                                    "colour":{"results":"adc"},
                                    "unhide":{"device":"tested"}
                                }
                            },
                            "logic_res":
                            {
                                "type":"Panel",
                                "size":[150,50],
                                "text":"Digital",
                                "pos":[0,150],
                                "layer":1,
                                "colours":
                                {
                                    "true":"green",
                                    "false":"red",
                                    "nt":"default_darker"
                                },
                                "refs":
                                {
                                    "colour":{"results":"logic"},
                                    "unhide":{"device":"tested"}
                                }
                            }
                        }
                    },
                    "comp":
                    {
                        "title":"Channels",
                        "include_widgets":["bs05", "next", "op_pass","op_counter"],
                        "layout":
                        {
                            "ch_a":
                            {
                                "type":"Drawing_Surface",
                                "size":[500,425],
                                "pos":[15,15],
                                "mode":"trace",
                                "layer":1,
                                "scale":{"y":-0.015, "x":2},
                                "offset":{"y":220},
                                "slots":
                                {
                                    "colour":true,
                                    "offset":false,
                                    "colours":[[170,140,140],[255,255,0]],
                                    "order":["t","a"]
                                },
                                "refs":
                                {
                                    "a":{"ch":{"a":"display_trace"}},
                                    "t":{"templates":"comp"}
                                }
                            },
                            "ch_b":
                            {
                                "type":"Drawing_Surface",
                                "size":[500,425],
                                "pos":[565,15],
                                "mode":"trace",
                                "layer":1,
                                "scale":{"y":-0.015, "x":2},
                                "offset":{"y":220},
                                "slots":
                                {
                                    "colour":true,
                                    "offset":false,
                                    "colours":[[170,140,140],[0,255,0]],
                                    "order":["t","b"]
                                },
                                "refs":
                                {
                                    "b":{"ch":{"b":"display_trace"}},
                                    "t":{"templates":"comp"}
                                }
                            },
                            "ch_a_sos":
                            {
                                "type":"Panel",
                                "size":"sml_disp",
                                "layer":2,
                                "font_size":40,
                                "pos":[191,365],
                                "alterable":false,
                                "refs":
                                {
                                    "data":{"ch":{"a":"result"}},
                                    "redraw":{"ch":{"a":"display_trace"}}
                                }
                            },
                            "ch_b_sos":
                            {
                                "type":"Panel",
                                "size":"sml_disp",
                                "layer":2,
                                "font_size":40,
                                "pos":[740,365],
                                "alterable":false,
                                "refs":
                                {
                                    "data":{"ch":{"b":"result"}},
                                    "redraw":{"ch":{"b":"display_trace"}}
                                }
                            },
                            "a_pass":
                            {
                                "type":"LED",
                                "size":"led_huge",
                                "layer":0,
                                "pos":[0,0],
                                "size":[530,455],
                                "refs":
                                {
                                    "colour":{"ch":{"a":{"pass":"comp"}}}
                                }
                            },
                            "b_pass":
                            {
                                "type":"LED",
                                "size":"led_huge",
                                "layer":0,
                                "pos":[550,0],
                                "size":[530,455],
                                "refs":
                                {
                                    "data":{"ch":{"b":{"pass":"comp"}}}
                                }
                            },
                            "next":
                            {
                                "on_click":
                                [
                                    "switch_view('adc')",
                                    "switch_operation('adc')"
                                ],
                                "refs":
                                {
                                    "colour":{"results":"comp"},
                                    "text":{"results":"comp"}
                                }
                            },
                            "bs05":
                            {
                                "images":
                                {
                                    "proceed":"bs05-comp.png"
                                }
                            }
                        }
                    },
                    "adc":
                    {
                        "title":"Analog",
                        "include_widgets":["bs05", "next", "op_pass","op_counter"],
                        "layout":
                        {
                            "trace":
                            {
                                "type":"Drawing_Surface",
                                "size":[500,425],
                                "pos":[15,15],
                                "mode":"trace",
                                "layer":1,
                                "scale":{"y":-1.6, "x":1.08},
                                "offset":{"y":450},
                                "slots":
                                {
                                    "colour":true,
                                    "offset":false,
                                    "colours":[[200,200,200],[255,255,0]],
                                    "order":["t", "a"]
                                },
                                "refs":
                                {
                                    "a":{"ch":{"a":"display_trace"}},
                                    "t":{"templates":"adc"}
                                }
                            },
                            "sos_a":
                            {
                                "type":"Panel",
                                "size":"sml_disp",
                                "pos":[191,365],
                                "font_size":40,
                                "layer":2,
                                "alterable":false,
                                "refs":
                                {
                                    "data":{"ch":{"a":"result"}},
                                    "redraw":{"ch":{"a":"display_trace"}}
                                }
                            },
                            "a_pass":
                            {
                                "type":"LED",
                                "size":[530,455],
                                "layer":0,
                                "pos":[0,0],
                                "refs":
                                {
                                    "data":{"ch":{"a":{"pass":"adc"}}}
                                }
                            },
                            "next":
                            {
                                "on_click":
                                [
                                    "switch_view('logic')",
                                    "switch_operation('logic')"
                                ],
                                "refs":
                                {
                                    "colour":{"results":"adc"},
                                    "text":{"results":"adc"}
                                }
                            },
                            "bs05":
                            {
                                "images":
                                {
                                    "proceed":"bs05-adc.png"
                                }
                            }
                        }
                    },
                    "logic":
                    {
                        "title":"Digital",
                        "include_widgets":["bs05", "next", "op_pass","op_counter"],
                        "layout":
                        {
                            "a_b":
                            {
                                "type":"Drawing_Surface",
                                "size":[500,190],
                                "pos":[565,250],
                                "mode":"logic",
                                "layer":1,
                                "slots":
                                {
                                    "offset":true,
                                    "colour":true,
                                    "order":["b", "a"],
                                    "colours":
                                    [
                                        [0,255,20],
                                        [250,250,10]
                                    ]
                                },
                                "offset":{"y":83},
                                "scale":{"x":0.7,"y":-60},
                                "start":{"y":85},
                                "refs":
                                {
                                    "a":{"ch":{"logic":{"traces":{"l":0}}}},
                                    "b":{"ch":{"logic":{"traces":{"l":1}}}}
                                }
                            },
                            "l4_l5":
                            {
                                "type":"Drawing_Surface",
                                "size":[500,193],
                                "pos":[565,15],
                                "mode":"logic",
                                "layer":1,
                                "slots":
                                {
                                    "offset":true,
                                    "colour":true,
                                    "colours":
                                    [
                                        [250,180,20],
                                        [220,20,200]
                                    ],
                                    "order":["l4", "l5"]
                                },
                                "offset":{"y":83},
                                "scale":{"x":0.7,"y":-60},
                                "start":{"y":85},
                                "refs":
                                {
                                    "l5":{"ch":{"logic":{"traces":{"l":2}}}},
                                    "l4":{"ch":{"logic":{"traces":{"l":3}}}}
                                }
                            },
                            "logs":
                            {
                                "type":"Drawing_Surface",
                                "size":[500,425],
                                "pos":[15,15],
                                "mode":"logic",
                                "layer":2,
                                "slots":
                                {
                                    "offset":true,
                                    "colour":true,
                                    "order":["l0", "l1", "l2", "l3"],
                                    "colours":
                                    [
                                        [250,230,210],
                                        [230,210,190],
                                        [210,190,170],
                                        [190,170,150]
                                    ]
                                },
                                "offset":{"y":90},
                                "scale":{"x":1.6,"y":-60},
                                "start":{"y":110},
                                "refs":
                                {
                                    "l0":{"ch":{"logic":{"traces":{"l":7}}}},
                                    "l1":{"ch":{"logic":{"traces":{"l":6}}}},
                                    "l2":{"ch":{"logic":{"traces":{"l":5}}}},
                                    "l3":{"ch":{"logic":{"traces":{"l":4}}}}
                                }
                            },
                            "a_b_error":
                            {
                                "type":"LED",
                                "size":[530,221],
                                "reversed":true,
                                "pos":[0,0],
                                "pos":[550,235],
                                "layer":0,
                                "refs":
                                {
                                    "data":{"ch":{"logic":{"error":"a_b"}}}
                                }
                            },
                            "l4_l5_error":
                            {
                                "type":"LED",
                                "size":[530,223],
                                "reversed":true,
                                "pos":[550,0],
                                "layer":0,
                                "refs":
                                {
                                    "data":{"ch":{"logic":{"error":"l4_l5"}}}
                                }
                            },
                            "stag_error":
                            {
                                "type":"LED",
                                "size":[530,455],
                                "reversed":true,
                                "pos":[0,0],
                                "layer":0,
                                "refs":
                                {
                                    "data":{"ch":{"logic":{"error":"staggered"}}}
                                }
                            },
                            "next":
                            {
                                "on_click":
                                [
                                    "switch_view('pre_test')",
                                    "switch_operation('post_test')"
                                ],
                                "refs":
                                {
                                    "colour":{"results":"logic"},
                                    "text":{"results":"logic"}
                                }
                            },
                            "bs05":
                            {
                                "images":
                                {
                                    "proceed":"bs05-logic.png"
                                }
                            }
                        }                        
                    }
                }
            }
        }
    }
}
